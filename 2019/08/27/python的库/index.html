<!DOCTYPE html>
<html lang="zn-ch">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Python的PIL库Image读出来的是PIL的类型，而skimage.io读出来的数据是numpy格式的1234567# Image和skimage读图片import Image as imgimport osfrom matplotlib import pyplot as plotfrom skimage import io,transformimg_file1 &#x3D; img.open(&amp;#x">
<meta property="og:type" content="article">
<meta property="og:title" content="python的PIL库">
<meta property="og:url" content="http://yoursite.com/2019/08/27/python%E7%9A%84%E5%BA%93/index.html">
<meta property="og:site_name" content="Hao Yu&#39;s blog">
<meta property="og:description" content="Python的PIL库Image读出来的是PIL的类型，而skimage.io读出来的数据是numpy格式的1234567# Image和skimage读图片import Image as imgimport osfrom matplotlib import pyplot as plotfrom skimage import io,transformimg_file1 &#x3D; img.open(&amp;#x">
<meta property="og:locale" content="zn_CH">
<meta property="article:published_time" content="2019-08-27T02:23:00.000Z">
<meta property="article:modified_time" content="2022-01-07T06:13:53.000Z">
<meta property="article:author" content="Hao Yu">
<meta property="article:tag" content="积累">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2019/08/27/python%E7%9A%84%E5%BA%93/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zn-ch'
  };
</script>

  <title>python的PIL库 | Hao Yu's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hao Yu's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">The program monkey was eaten by the siege lion.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zn-ch">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/27/python%E7%9A%84%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hao Yu">
      <meta itemprop="description" content="Introduce something interesting and recode learning process, some articles are written by others, the original link has been given as much as possible, thanks to the original author">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hao Yu's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          python的PIL库
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-27 10:23:00" itemprop="dateCreated datePublished" datetime="2019-08-27T10:23:00+08:00">2019-08-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-07 14:13:53" itemprop="dateModified" datetime="2022-01-07T14:13:53+08:00">2022-01-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Python的PIL库"><a href="#Python的PIL库" class="headerlink" title="Python的PIL库"></a>Python的PIL库</h1><p>Image读出来的是PIL的类型，而skimage.io读出来的数据是numpy格式的<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Image和skimage读图片</span></span><br><span class="line"><span class="keyword">import</span> Image <span class="keyword">as</span> img</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plot</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> io,transform</span><br><span class="line">img_file1 = img.<span class="built_in">open</span>(<span class="string">&#x27;./CXR_png/MCUCXR_0042_0.png&#x27;</span>)</span><br><span class="line">img_file2 = io.imread(<span class="string">&#x27;./CXR_png/MCUCXR_0042_0.png&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<p>输出可以看出Img读图片的大小是图片的(width, height)；而skimage的是(height,width, channel)，这也是为什么caffe在单独测试时要要在代码中设置：transformer.set_transpose(‘data’,(2,0,1))，因为caffe可以处理的图片的数据格式是(channel,height,width)，所以要转换数据。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#读图片后数据的大小：</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;the picture&#x27;s size: &quot;</span>, img_file1.size</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;the picture&#x27;s shape: &quot;</span>, img_file2.shape</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">the picture&#x27;s size:  (4892, 4020)</span><br><span class="line">the picture&#x27;s shape:  (4020, 4892)</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#得到像素：</span></span><br><span class="line"><span class="built_in">print</span>(img_file1.getpixel((<span class="number">500</span>,<span class="number">1000</span>)), img_file2[<span class="number">500</span>][<span class="number">1000</span>])</span><br><span class="line"><span class="built_in">print</span>(img_file1.getpixel((<span class="number">500</span>,<span class="number">1000</span>)), img_file2[<span class="number">1000</span>][<span class="number">500</span>])</span><br><span class="line"><span class="built_in">print</span>(img_file1.getpixel((<span class="number">1000</span>,<span class="number">500</span>)), img_file2[<span class="number">500</span>][<span class="number">1000</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(0, 139)</span><br><span class="line">(0, 0)</span><br><span class="line">(139, 139)</span><br></pre></td></tr></table></figure>
<p>Img读出来的图片获得某点像素用getpixel((w,h))可以直接返回这个点三个通道的像素值<br>skimage读出来的图片可以直接img_file2[0][0]获得，但是一定记住它的格式，并不是你想的(channel,height,width)</p>
<h2 id="在图片上面加文字"><a href="#在图片上面加文字" class="headerlink" title="在图片上面加文字"></a>在图片上面加文字</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#新建绘图对象</span></span><br><span class="line">draw = ImageDraw.Draw(image)，</span><br><span class="line"><span class="comment">#获取图像的宽和高</span></span><br><span class="line">width, height = image.size；</span><br><span class="line"><span class="comment">#** ImageFont模块**</span></span><br><span class="line"><span class="comment">#选择文字字体和大小</span></span><br><span class="line">setFont = ImageFont.truetype(<span class="string">&#x27;C:/windows/fonts/Dengl.ttf&#x27;</span>, <span class="number">20</span>)，</span><br><span class="line"><span class="comment">#设置文字颜色</span></span><br><span class="line">fillColor = <span class="string">&quot;#ff0000&quot;</span></span><br><span class="line"><span class="comment">#写入文字</span></span><br><span class="line">draw.text((<span class="number">40</span>, height - <span class="number">100</span>), <span class="string">u&#x27;广告&#x27;</span>, font=setFont, fill=fillColor)</span><br></pre></td></tr></table></figure>
<h2 id="图片信息"><a href="#图片信息" class="headerlink" title="图片信息"></a>图片信息</h2><p>如果我们想知道一些skimage图片信息<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> io, data</span><br><span class="line">img = data.chelsea()</span><br><span class="line">io.imshow(img)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(img))  <span class="comment">#显示类型</span></span><br><span class="line"><span class="built_in">print</span>(img.shape)  <span class="comment">#显示尺寸</span></span><br><span class="line"><span class="built_in">print</span>(img.shape[<span class="number">0</span>])  <span class="comment">#图片高度</span></span><br><span class="line"><span class="built_in">print</span>(img.shape[<span class="number">1</span>])  <span class="comment">#图片宽度</span></span><br><span class="line"><span class="built_in">print</span>(img.shape[<span class="number">2</span>])  <span class="comment">#图片通道数</span></span><br><span class="line"><span class="built_in">print</span>(img.size)   <span class="comment">#显示总像素个数</span></span><br><span class="line"><span class="built_in">print</span>(img.<span class="built_in">max</span>())  <span class="comment">#最大像素值</span></span><br><span class="line"><span class="built_in">print</span>(img.<span class="built_in">min</span>())  <span class="comment">#最小像素值</span></span><br><span class="line"><span class="built_in">print</span>(img.mean()) <span class="comment">#像素平均值</span></span><br><span class="line"><span class="built_in">print</span>(img[<span class="number">0</span>][<span class="number">0</span>])<span class="comment">#图像的像素值</span></span><br></pre></td></tr></table></figure><br>PIL image 查看图片信息，可用如下的方法<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> <span class="built_in">type</span>(img)</span><br><span class="line"><span class="built_in">print</span> img.size  <span class="comment">#图片的尺寸</span></span><br><span class="line"><span class="built_in">print</span> img.mode  <span class="comment">#图片的模式</span></span><br><span class="line"><span class="built_in">print</span> img.<span class="built_in">format</span>  <span class="comment">#图片的格式</span></span><br><span class="line"><span class="built_in">print</span>(img.getpixel((<span class="number">0</span>,<span class="number">0</span>)))<span class="comment">#得到像素：</span></span><br><span class="line"><span class="comment">#img读出来的图片获得某点像素用getpixel((w,h))可以直接返回这个点三个通道的像素值</span></span><br></pre></td></tr></table></figure><br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取图像的灰度值范围</span></span><br><span class="line">width = img.size[<span class="number">0</span>]</span><br><span class="line">height = img.size[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出图片的像素值</span></span><br><span class="line">count = <span class="number">0</span> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, width):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, height):</span><br><span class="line">        <span class="keyword">if</span> img.getpixel((i, j))&gt;=<span class="number">0</span> <span class="keyword">and</span> img.getpixel((i, j))&lt;=<span class="number">255</span>:</span><br><span class="line">            count +=<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span> count</span><br><span class="line"><span class="built_in">print</span>(height*width)</span><br></pre></td></tr></table></figure></p>
<p>使用python进行数字图片处理，还得安装Pillow包。虽然python里面自带一个PIL（python images library), 但这个库现在已经停止更新了，所以使用Pillow, 它是由PIL发展而来的。</p>
<h3 id="pil能处理的图片类型"><a href="#pil能处理的图片类型" class="headerlink" title="pil能处理的图片类型"></a>pil能处理的图片类型</h3><p>pil可以处理光栅图片(像素数据组成的的块)。</p>
<h3 id="通道"><a href="#通道" class="headerlink" title="通道"></a>通道</h3><p>一个图片可以包含一到多个数据通道，如果这些通道具有相同的维数和深度，Pil允许将这些通道进行叠加<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">模式</span><br><span class="line">1             1位像素，黑和白，存成8位的像素</span><br><span class="line">L             8位像素，黑白</span><br><span class="line">P             8位像素，使用调色板映射到任何其他模式</span><br><span class="line">RGB           3×8位像素，真彩</span><br><span class="line">RGBA          4×8位像素，真彩+透明通道</span><br><span class="line">CMYK          4×8位像素，颜色隔离</span><br><span class="line">YCbCr         3×8位像素，彩色视频格式</span><br><span class="line">I             32位整型像素</span><br><span class="line">F             32位浮点型像素</span><br></pre></td></tr></table></figure></p>
<h3 id="坐标"><a href="#坐标" class="headerlink" title="坐标"></a>坐标</h3><p>Pil采取左上角为(0,0)的坐标系统</p>
<h1 id="图片的打开与显示"><a href="#图片的打开与显示" class="headerlink" title="图片的打开与显示"></a>图片的打开与显示</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line">img=Image.<span class="built_in">open</span>(<span class="string">&#x27;d:/dog.png&#x27;</span>)</span><br><span class="line">img.show()</span><br></pre></td></tr></table></figure>
<p>虽然使用的是Pillow，但它是由PIL fork而来，因此还是要从PIL中进行import. 使用open()函数来打开图片，使用show()函数来显示图片。<br>这种图片显示方式是调用操作系统自带的图片浏览器来打开图片，有些时候这种方式不太方便，因此我们也可以使用另上一种方式，让程序来绘制图片。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">img=Image.open(&#x27;d:/dog.png&#x27;)</span><br><span class="line">plt.figure(&quot;dog&quot;)</span><br><span class="line">plt.figure(num=1, figsize=(8,5),)</span><br><span class="line">plt.title(&#x27;The image title&#x27;)</span><br><span class="line">plt.axis(&#x27;off&#x27;) # 不显示坐标轴</span><br><span class="line">plt.imshow(img)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><br>这种方法虽然复杂了些，但推荐使用这种方法，它使用一个matplotlib的库来绘制图片进行显示。matplotlib是一个专业绘图的库，相当于matlab中的plot,可以设置多个figure,设置figure的标题，甚至可以使用subplot在一个figure中显示多张图片。matplotlib 可以直接安装.<br>figure默认是带axis的，如果没有需要，我们可以关掉<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.axis(&#x27;off&#x27;)</span><br></pre></td></tr></table></figure><br>图像加标题<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.title(&#x27;The image title&#x27;)</span><br></pre></td></tr></table></figure></p>
<h2 id="matplotlib标准模式"><a href="#matplotlib标准模式" class="headerlink" title="matplotlib标准模式"></a>matplotlib标准模式</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(num=<span class="number">5</span>, figsize=(<span class="number">8</span>,<span class="number">5</span>),)</span><br><span class="line"><span class="comment">#plt.figure(num=&#x27;newimage&#x27;, figsize=(8,5),)</span></span><br><span class="line">plt.title(<span class="string">&#x27;The image title&#x27;</span>, color=<span class="string">&#x27;#0000FF&#x27;</span>)</span><br><span class="line">plt.imshow(lena) <span class="comment"># 显示图片</span></span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>) <span class="comment"># 不显示坐标轴</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>PIL image 查看图片信息，可用如下的方法<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print type(img)</span><br><span class="line">print img.size  #图片的尺寸</span><br><span class="line">print img.mode  #图片的模式</span><br><span class="line">print img.format  #图片的格式</span><br></pre></td></tr></table></figure></p>
<h2 id="图片的保存"><a href="#图片的保存" class="headerlink" title="图片的保存"></a>图片的保存</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img.save(&#x27;d:/dog.jpg&#x27;)</span><br></pre></td></tr></table></figure>
<p>就一行代码，非常简单。这行代码不仅能保存图片，还是转换格式，如本例中，就由原来的png图片保存为了jpg图片。</p>
<h2 id="图像通道-几何变换-裁剪"><a href="#图像通道-几何变换-裁剪" class="headerlink" title="图像通道\几何变换\裁剪"></a>图像通道\几何变换\裁剪</h2><p>PIL可以对图像的颜色进行转换，并支持诸如24位彩色、8位灰度图和二值图等模式，简单的转换可以通过Image.convert(mode)函数完 成，其中mode表示输出的颜色模式，例如’’L’’表示灰度，’’1’’表示二值图模式等。但是利用convert函数将灰度图转换为二值图时，是采用 固定的阈 值127来实现的，即灰度高于127的像素值为1，而灰度低于127的像素值为0。</p>
<h3 id="彩色图像转灰度图"><a href="#彩色图像转灰度图" class="headerlink" title="彩色图像转灰度图"></a>彩色图像转灰度图</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">img=Image.<span class="built_in">open</span>(<span class="string">&#x27;d:/ex.jpg&#x27;</span>)</span><br><span class="line">gray=img.convert(<span class="string">&#x27;L&#x27;</span>)</span><br><span class="line">plt.figure(<span class="string">&quot;beauty&quot;</span>)</span><br><span class="line">plt.imshow(gray,cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;The color image to gray image&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>使用函数convert()来进行转换，它是图像实例对象的一个方法，接受一个 mode 参数，用以指定一种色彩模式，mode 的取值可以是如下几种：</p>
<ul>
<li>1 (1-bit pixels, black and white, stored with one pixel per byte)</li>
<li>L (8-bit pixels, black and white)</li>
<li>P (8-bit pixels, mapped to any other mode using a colour palette)</li>
<li>RGB (3x8-bit pixels, true colour)</li>
<li>RGBA (4x8-bit pixels, true colour with transparency mask)</li>
<li>CMYK (4x8-bit pixels, colour separation)</li>
<li>YCbCr (3x8-bit pixels, colour video format)</li>
<li>I (32-bit signed integer pixels)</li>
<li>F (32-bit floating point pixels)</li>
</ul>
<h2 id="通道分离与合并"><a href="#通道分离与合并" class="headerlink" title="通道分离与合并"></a>通道分离与合并</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">img=Image.<span class="built_in">open</span>(<span class="string">&#x27;d:/ex.jpg&#x27;</span>)  <span class="comment">#打开图像</span></span><br><span class="line">gray=img.convert(<span class="string">&#x27;L&#x27;</span>)   <span class="comment">#转换成灰度</span></span><br><span class="line">r,g,b=img.split()   <span class="comment">#分离三通道</span></span><br><span class="line">pic=Image.merge(<span class="string">&#x27;RGB&#x27;</span>,(r,g,b)) <span class="comment">#合并三通道</span></span><br><span class="line">plt.figure(<span class="string">&quot;beauty&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>), plt.title(<span class="string">&#x27;origin&#x27;</span>)</span><br><span class="line">plt.imshow(img),plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>), plt.title(<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.imshow(gray,cmap=<span class="string">&#x27;gray&#x27;</span>),plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>), plt.title(<span class="string">&#x27;merge&#x27;</span>)</span><br><span class="line">plt.imshow(pic),plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>), plt.title(<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.imshow(r,cmap=<span class="string">&#x27;gray&#x27;</span>),plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>), plt.title(<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">plt.imshow(g,cmap=<span class="string">&#x27;gray&#x27;</span>),plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>), plt.title(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.imshow(b,cmap=<span class="string">&#x27;gray&#x27;</span>),plt.axis(<span class="string">&#x27;off&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h3 id="水平拼接图片"><a href="#水平拼接图片" class="headerlink" title="水平拼接图片"></a>水平拼接图片</h3><p>给老板整理材料，顺手写了两个脚本，拼接图片用的<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">from PIL import Image</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">file_num = len(sys.argv) - 2;</span><br><span class="line">quali = int(sys.argv[1])</span><br><span class="line">file_list = sys.argv[2:]</span><br><span class="line">print(file_list)</span><br><span class="line">min_height=999999</span><br><span class="line">sum_width = 0</span><br><span class="line">img_list=[]</span><br><span class="line">for file_name in file_list:</span><br><span class="line">    img = Image.open(file_name)</span><br><span class="line">    img_list.append(img)</span><br><span class="line">    if(img.size[1]&lt;min_height):</span><br><span class="line">        min_height = img.size[1]</span><br><span class="line">    sum_width = sum_width + img.size[0]</span><br><span class="line">print(&quot;asdf&quot;)</span><br><span class="line">out_list=[]</span><br><span class="line">for file_name in file_list:</span><br><span class="line">    img = Image.open(file_name)</span><br><span class="line">    out = img.resize((img.size[0],min_height),Image.ANTIALIAS) #resize image with high-quality</span><br><span class="line">    out.save(file_name)</span><br><span class="line"></span><br><span class="line">target = Image.new(&#x27;RGB&#x27;,(sum_width,min_height))</span><br><span class="line">left = 0</span><br><span class="line">right = 0</span><br><span class="line">for file_name in file_list:</span><br><span class="line">    image = Image.open(file_name)</span><br><span class="line">    right += image.size[0]</span><br><span class="line">    target.paste(image,(left,0,right,min_height))</span><br><span class="line">    print(&quot;aaa&quot;)</span><br><span class="line">    left += image.size[0]</span><br><span class="line">    #right += image.size[1]</span><br><span class="line"></span><br><span class="line">target.save(&#x27;result.jpg&#x27;,quality=quali)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h2 id="竖直拼接图片"><a href="#竖直拼接图片" class="headerlink" title="竖直拼接图片"></a>竖直拼接图片</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">file_num = <span class="built_in">len</span>(sys.argv) - <span class="number">2</span></span><br><span class="line">quali = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>])</span><br><span class="line">file_list = sys.argv[<span class="number">2</span>:]</span><br><span class="line"><span class="built_in">print</span>(file_list)</span><br><span class="line">min_width=<span class="number">999999</span></span><br><span class="line">sum_height = <span class="number">0</span></span><br><span class="line">img_list=[]</span><br><span class="line"><span class="keyword">for</span> file_name <span class="keyword">in</span> file_list:</span><br><span class="line">    img = Image.<span class="built_in">open</span>(file_name)</span><br><span class="line">    img_list.append(img)</span><br><span class="line">    <span class="keyword">if</span>(img.size[<span class="number">0</span>]&lt;min_width):</span><br><span class="line">        min_width = img.size[<span class="number">0</span>]</span><br><span class="line">    sum_height = sum_height + img.size[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;asdf&quot;</span>)</span><br><span class="line">out_list=[]</span><br><span class="line"><span class="keyword">for</span> file_name <span class="keyword">in</span> file_list:</span><br><span class="line">    img = Image.<span class="built_in">open</span>(file_name)</span><br><span class="line">    out = img.resize((min_width,img.size[<span class="number">1</span>]),Image.ANTIALIAS) <span class="comment">#resize image with high-quality</span></span><br><span class="line">    out.save(file_name)</span><br><span class="line"></span><br><span class="line">target = Image.new(<span class="string">&#x27;RGB&#x27;</span>,(min_width,sum_height))</span><br><span class="line">left = <span class="number">0</span></span><br><span class="line">right = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> file_name <span class="keyword">in</span> file_list:</span><br><span class="line">    image = Image.<span class="built_in">open</span>(file_name)</span><br><span class="line">    right += image.size[<span class="number">1</span>]</span><br><span class="line">    target.paste(image,(<span class="number">0</span>,left,min_width,right))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;aaa&quot;</span>)</span><br><span class="line">    left += image.size[<span class="number">1</span>]</span><br><span class="line">    <span class="comment">#right += image.size[1]</span></span><br><span class="line"></span><br><span class="line">target.save(<span class="string">&#x27;result.jpg&#x27;</span>,quality=quali)</span><br></pre></td></tr></table></figure>
<h2 id="裁剪图片"><a href="#裁剪图片" class="headerlink" title="裁剪图片"></a>裁剪图片</h2><p>从原图片中裁剪感兴趣区域（roi),裁剪区域由4-tuple决定，该tuple中信息为(left, upper, right, lower)。 Pillow左边系统的原点（0，0）为图片的左上角。坐标中的数字单位为像素点。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">img=Image.open(&#x27;d:/ex.jpg&#x27;)  #打开图像</span><br><span class="line">plt.figure(&quot;beauty&quot;)</span><br><span class="line">plt.subplot(1,2,1), plt.title(&#x27;origin&#x27;)</span><br><span class="line">plt.imshow(img),plt.axis(&#x27;off&#x27;)</span><br><span class="line">#box变量是一个四元组(左，上，右，下)。  </span><br><span class="line">box=(80,100,260,300)</span><br><span class="line">roi=img.crop(box)</span><br><span class="line">plt.subplot(1,2,2)</span><br><span class="line">plt.title(&#x27;roi&#x27;)</span><br><span class="line">plt.imshow(roi)</span><br><span class="line">plt.axis(&#x27;off&#x27;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><br>用plot绘制显示出图片后，将鼠标移动到图片上，会在右下角出现当前点的坐标，以及像素值。</p>
<h2 id="几何变换"><a href="#几何变换" class="headerlink" title="几何变换"></a>几何变换</h2><p>Image类有resize()、rotate()和transpose()方法进行几何变换。<br>图像的缩放和旋转<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dst = img.resize((128, 128))</span><br><span class="line">dst = img.rotate(45) # 顺时针角度表示</span><br></pre></td></tr></table></figure></p>
<h2 id="转换图像"><a href="#转换图像" class="headerlink" title="转换图像"></a>转换图像</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dst = im.transpose(Image.FLIP_LEFT_RIGHT) #左右互换</span><br><span class="line">dst = im.transpose(Image.FLIP_TOP_BOTTOM) #上下互换</span><br><span class="line">dst = im.transpose(Image.ROTATE_90)  #顺时针旋转</span><br><span class="line">dst = im.transpose(Image.ROTATE_180)</span><br><span class="line">dst = im.transpose(Image.ROTATE_270)</span><br></pre></td></tr></table></figure>
<p>transpose()和rotate()没有性能差别。</p>
<h2 id="python图像处理库Image模块"><a href="#python图像处理库Image模块" class="headerlink" title="python图像处理库Image模块"></a>python图像处理库Image模块</h2><h3 id="创建一个新的图片"><a href="#创建一个新的图片" class="headerlink" title="创建一个新的图片"></a>创建一个新的图片</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Image.new(mode, size)  </span><br><span class="line">Image.new(mode, size, color)  </span><br></pre></td></tr></table></figure>
<h2 id="层叠图片"><a href="#层叠图片" class="headerlink" title="层叠图片"></a>层叠图片</h2><p>层叠两个图片，img2和img2,alpha是一个介于[0,1]的浮点数，如果为0，效果为img1，如果为1.0，效果为img2。当然img1和img2的尺寸和模式必须相同。这个函数可以做出很漂亮的效果来，而图形的算术加减后边会说到。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Image.blend(img1, img2, alpha)  </span><br></pre></td></tr></table></figure><br>composite可以使用另外一个图片作为蒙板(mask)，所有的这三张图片必须具备相同的尺寸，mask图片的模式可以为“1”，“L”，“RGBA”<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Image.composite(img1, img2, mask) </span><br></pre></td></tr></table></figure></p>
<h2 id="添加水印"><a href="#添加水印" class="headerlink" title="添加水印"></a>添加水印</h2><h3 id="添加文字水印"><a href="#添加文字水印" class="headerlink" title="添加文字水印"></a>添加文字水印</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from PIL import Image, ImageDraw,ImageFont</span><br><span class="line">im = Image.open(&quot;d:/pic/lena.jpg&quot;).convert(&#x27;RGBA&#x27;)</span><br><span class="line">txt=Image.new(&#x27;RGBA&#x27;, im.size, (0,0,0,0))</span><br><span class="line">fnt=ImageFont.truetype(&quot;c:/Windows/fonts/Tahoma.ttf&quot;, 20)</span><br><span class="line">d=ImageDraw.Draw(txt)</span><br><span class="line">d.text((txt.size[0]-80,txt.size[1]-30), &quot;cnBlogs&quot;,font=fnt, fill=(255,255,255,255))</span><br><span class="line">out=Image.alpha_composite(im, txt)</span><br><span class="line">out.show()</span><br></pre></td></tr></table></figure>
<h3 id="添加小图片水印"><a href="#添加小图片水印" class="headerlink" title="添加小图片水印"></a>添加小图片水印</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">im = Image.open(&quot;d:/pic/lena.jpg&quot;)</span><br><span class="line">mark=Image.open(&quot;d:/logo_small.gif&quot;)</span><br><span class="line">layer=Image.new(&#x27;RGBA&#x27;, im.size, (0,0,0,0))</span><br><span class="line">layer.paste(mark, (im.size[0]-150,im.size[1]-60))</span><br><span class="line">out=Image.composite(layer,im,layer)</span><br><span class="line">out.show()</span><br></pre></td></tr></table></figure>
<h3 id="PIL-Image-图像互转-numpy-数组"><a href="#PIL-Image-图像互转-numpy-数组" class="headerlink" title="PIL Image 图像互转 numpy 数组"></a>PIL Image 图像互转 numpy 数组</h3><p>将 PIL Image 图片转换为 numpy 数组<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">im_array = np.array(im)</span><br><span class="line"># 也可以用 np.asarray(im) 区别是 np.array() 是深拷贝，np.asarray() 是浅拷贝</span><br></pre></td></tr></table></figure></p>
<h3 id="numpy-image-查看图片信息，可用如下的方法"><a href="#numpy-image-查看图片信息，可用如下的方法" class="headerlink" title="numpy image 查看图片信息，可用如下的方法"></a>numpy image 查看图片信息，可用如下的方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print img.shape  </span><br><span class="line">print img.dtype </span><br></pre></td></tr></table></figure>
<h3 id="将-numpy-数组转换为-PIL-图片"><a href="#将-numpy-数组转换为-PIL-图片" class="headerlink" title="将 numpy 数组转换为 PIL 图片"></a>将 numpy 数组转换为 PIL 图片</h3><p>这里采用 matplotlib.image 读入图片数组，注意这里读入的数组是 float32 型的，范围是 0-1，而 PIL.Image 数据是 uinit8 型的，范围是0-255，所以要进行转换：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.image as mpimg</span><br><span class="line">from PIL import Image</span><br><span class="line">lena = mpimg.imread(&#x27;lena.png&#x27;) # 这里读入的数据是 float32 型的，范围是0-1</span><br><span class="line">im = Image.fromarray(np.uinit8(lena*255))</span><br><span class="line">im.show()</span><br></pre></td></tr></table></figure></p>
<h3 id="PIL-image-查看图片信息，可用如下的方法"><a href="#PIL-image-查看图片信息，可用如下的方法" class="headerlink" title="PIL image 查看图片信息，可用如下的方法"></a>PIL image 查看图片信息，可用如下的方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print type(img)</span><br><span class="line">print img.size  #图片的尺寸</span><br><span class="line">print img.mode  #图片的模式</span><br><span class="line">print img.format  #图片的格式</span><br><span class="line">print(img.getpixel((0,0))[0])#得到像素：</span><br><span class="line">#img读出来的图片获得某点像素用getpixel((w,h))可以直接返回这个点三个通道的像素值</span><br></pre></td></tr></table></figure>
<h1 id="图像中的像素访问"><a href="#图像中的像素访问" class="headerlink" title="图像中的像素访问"></a>图像中的像素访问</h1><p>前面的一些例子中，我们都是利用Image.open（）来打开一幅图像，然后直接对这个PIL对象进行操作。如果只是简单的操作还可以，但是如果操作稍微复杂一些，就比较吃力了。因此，通常我们加载完图片后，都是把图片转换成矩阵来进行更加复杂的操作。<br>打开图像并转化为矩阵，并显示<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">img=np.array(Image.open(&#x27;d:/lena.jpg&#x27;))  #打开图像并转化为数字矩阵</span><br><span class="line">plt.figure(&quot;dog&quot;)</span><br><span class="line">plt.imshow(img)</span><br><span class="line">plt.axis(&#x27;off&#x27;)</span><br><span class="line">plt.title(&#x27;The image title&#x27;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><br>调用numpy中的array（）函数就可以将PIL对象转换为数组对象。</p>
<p>查看图片信息，可用如下的方法<br>PIL image 查看图片信息，可用如下的方法<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print type(img)</span><br><span class="line">print img.size  #图片的尺寸</span><br><span class="line">print img.mode  #图片的模式</span><br><span class="line">print img.format  #图片的格式</span><br><span class="line">print(img.getpixel((0,0))[0])#得到像素：</span><br><span class="line">#img读出来的图片获得某点像素用getpixel((w,h))可以直接返回这个点三个通道的像素值</span><br></pre></td></tr></table></figure></p>
<p>如果是RGB图片，那么转换为array之后，就变成了一个rowscolschannels的三维矩阵,因此，我们可以使用<br>img[i,j,k]来访问像素值。</p>
<p>例1：打开图片，并随机添加一些椒盐噪声<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">img=np.array(Image.open(&#x27;d:/ex.jpg&#x27;))</span><br><span class="line"></span><br><span class="line">#随机生成5000个椒盐</span><br><span class="line">rows,cols,dims=img.shape</span><br><span class="line">for i in range(5000):</span><br><span class="line">    x=np.random.randint(0,rows)</span><br><span class="line">    y=np.random.randint(0,cols)</span><br><span class="line">    img[x,y,:]=255</span><br><span class="line">    </span><br><span class="line">plt.figure(&quot;beauty&quot;)</span><br><span class="line">plt.imshow(img)</span><br><span class="line">plt.axis(&#x27;off&#x27;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<p>例2：将lena图像二值化，像素值大于128的变为1，否则变为0<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">img=np.array(Image.open(&#x27;d:/pic/lena.jpg&#x27;).convert(&#x27;L&#x27;))</span><br><span class="line"></span><br><span class="line">rows,cols=img.shape</span><br><span class="line">for i in range(rows):</span><br><span class="line">    for j in range(cols):</span><br><span class="line">        if (img[i,j]&lt;=128):</span><br><span class="line">            img[i,j]=0</span><br><span class="line">        else:</span><br><span class="line">            img[i,j]=1</span><br><span class="line">            </span><br><span class="line">plt.figure(&quot;lena&quot;)</span><br><span class="line">plt.imshow(img,cmap=&#x27;gray&#x27;)</span><br><span class="line">plt.axis(&#x27;off&#x27;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<p>如果要对多个像素点进行操作，可以使用数组切片方式访问。切片方式返回的是以指定间隔下标访问 该数组的像素值。下面是有关灰度图像的一些例子：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">img[i,:] = im[j,:] # 将第 j 行的数值赋值给第 i 行</span><br><span class="line">img[:,i] = 100 # 将第 i 列的所有数值设为 100</span><br><span class="line">img[:100,:50].sum() # 计算前 100 行、前 50 列所有数值的和</span><br><span class="line">img[50:100,50:100] # 50~100 行，50~100 列（不包括第 100 行和第 100 列）</span><br><span class="line">img[i].mean() # 第 i 行所有数值的平均值</span><br><span class="line">img[:,-1] # 最后一列</span><br><span class="line">img[-2,:] (or im[-2]) # 倒数第二行</span><br></pre></td></tr></table></figure></p>
<h2 id="直接操作像素点"><a href="#直接操作像素点" class="headerlink" title="直接操作像素点"></a>直接操作像素点</h2><p>不但可以对每个像素点进行操作，而且，每一个通道都可以独立的进行操作。比如，将每个像素点的亮度(不知道有没有更专业的词)增大20%<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">out = img.point(lambda i : i * 1.2)</span><br><span class="line">#注意这里用到一个匿名函数(那个可以把i的1.2倍返回的函数)  </span><br><span class="line"></span><br><span class="line">argument * scale + offset  </span><br><span class="line">e.g  </span><br><span class="line">out = img.point(lambda i: i*1.2 + 10)</span><br></pre></td></tr></table></figure></p>
<h2 id="图像直方图"><a href="#图像直方图" class="headerlink" title="图像直方图"></a>图像直方图</h2><p>我们先来看两个函数reshape和flatten:<br>假设我们先生成一个一维数组：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vec=np.arange(15)</span><br><span class="line">print vec</span><br></pre></td></tr></table></figure></p>
<p>如果我们要把这个一维数组，变成一个<code>3*5</code>二维矩阵，我们可以使用reshape来实现<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mat= vec.reshape(3,5)</span><br><span class="line">print mat</span><br></pre></td></tr></table></figure><br>现在如果我们返过来，知道一个二维矩阵，要变成一个一维数组，就不能用reshape了，只能用flatten. 我们来看两者的区别<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a1=mat.reshape(1,-1)  #-1表示为任意，让系统自动计算</span><br><span class="line">print a1</span><br><span class="line">a2=mat.flatten()</span><br><span class="line">print a2</span><br></pre></td></tr></table></figure></p>
<p>可以看出，用reshape进行变换，实际上变换后还是二维数组，两个方括号，因此只能用flatten.<br>我们要对图像求直方图，就需要先把图像矩阵进行flatten操作，使之变为一维数组，然后再进行统计</p>
<h3 id="画灰度图直方图"><a href="#画灰度图直方图" class="headerlink" title="画灰度图直方图"></a>画灰度图直方图</h3><p>绘图都可以调用matplotlib.pyplot库来进行，其中的hist函数可以直接绘制直方图。<br>调用方式：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n, bins, patches = plt.hist(arr, bins=<span class="number">50</span>, normed=<span class="number">1</span>, facecolor=<span class="string">&#x27;green&#x27;</span>, alpha=<span class="number">0.75</span>)</span><br></pre></td></tr></table></figure><br>hist的参数非常多，但常用的就这五个，只有第一个是必须的，后面四个可选<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arr: 需要计算直方图的一维数组</span><br><span class="line">bins: 直方图的柱数，可选项，默认为10</span><br><span class="line">normed: 是否将得到的直方图向量归一化。默认为0</span><br><span class="line">facecolor: 直方图颜色</span><br><span class="line">alpha: 透明度</span><br></pre></td></tr></table></figure><br>返回值 ：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n: 直方图向量，是否归一化由参数设定</span><br><span class="line">bins: 返回各个bin的区间范围</span><br><span class="line">patches: 返回每个bin里面包含的数据，是一个list</span><br></pre></td></tr></table></figure><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from PIL import Image</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">img=np.array(Image.open(&#x27;d:/pic/lena.jpg&#x27;).convert(&#x27;L&#x27;))</span><br><span class="line"></span><br><span class="line">plt.figure(&quot;lena&quot;)</span><br><span class="line">arr=img.flatten()</span><br><span class="line">n, bins, patches = plt.hist(arr, bins=256, normed=1, facecolor=&#x27;green&#x27;, alpha=0.75)  </span><br><span class="line">plt.title(&#x27;The image title&#x27;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<h3 id="彩色图片直方图"><a href="#彩色图片直方图" class="headerlink" title="彩色图片直方图"></a>彩色图片直方图</h3><p>实际上是和灰度直方图一样的，只是分别画出三通道的直方图，然后叠加在一起。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">src=Image.<span class="built_in">open</span>(<span class="string">&#x27;d:/ex.jpg&#x27;</span>)</span><br><span class="line">r,g,b=src.split()</span><br><span class="line">plt.figure(<span class="string">&quot;lena&quot;</span>)</span><br><span class="line">ar=np.array(r).flatten()</span><br><span class="line">plt.hist(ar, bins=<span class="number">256</span>, normed=<span class="number">1</span>,facecolor=<span class="string">&#x27;r&#x27;</span>,edgecolor=<span class="string">&#x27;r&#x27;</span>,hold=<span class="number">1</span>)</span><br><span class="line">ag=np.array(g).flatten()</span><br><span class="line">plt.hist(ag, bins=<span class="number">256</span>, normed=<span class="number">1</span>, facecolor=<span class="string">&#x27;g&#x27;</span>,edgecolor=<span class="string">&#x27;g&#x27;</span>,hold=<span class="number">1</span>)</span><br><span class="line">ab=np.array(b).flatten()</span><br><span class="line">plt.hist(ab, bins=<span class="number">256</span>, normed=<span class="number">1</span>, facecolor=<span class="string">&#x27;b&#x27;</span>,edgecolor=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;The image title&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<h2 id="Python如何读取指定文件夹下的所有图像"><a href="#Python如何读取指定文件夹下的所有图像" class="headerlink" title="Python如何读取指定文件夹下的所有图像"></a>Python如何读取指定文件夹下的所有图像</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Load the image files form the folder</span></span><br><span class="line"><span class="string">input:</span></span><br><span class="line"><span class="string">    imgDir: the direction of the folder</span></span><br><span class="line"><span class="string">    imgName:the name of the folder</span></span><br><span class="line"><span class="string">output:</span></span><br><span class="line"><span class="string">    data:the data of the dataset</span></span><br><span class="line"><span class="string">    label:the label of the datset</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_Img</span>(<span class="params">imgDir,imgFoldName</span>):</span><br><span class="line">    imgs = os.listdir(imgDir+imgFoldName)</span><br><span class="line">    imgNum = <span class="built_in">len</span>(imgs)</span><br><span class="line">    data = np.empty((imgNum,<span class="number">1</span>,<span class="number">12</span>,<span class="number">12</span>),dtype=<span class="string">&quot;float32&quot;</span>)</span><br><span class="line">    label = np.empty((imgNum,),dtype=<span class="string">&quot;uint8&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span> (imgNum):</span><br><span class="line">        img = Image.<span class="built_in">open</span>(imgDir+imgFoldName+<span class="string">&quot;/&quot;</span>+imgs[i])</span><br><span class="line">        arr = np.asarray(img,dtype=<span class="string">&quot;float32&quot;</span>)</span><br><span class="line">        data[i,:,:,:] = arr</span><br><span class="line">        label[i] = <span class="built_in">int</span>(imgs[i].split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">return</span> data,label</span><br></pre></td></tr></table></figure>
<p>调用方式<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">craterDir = &quot;./data/CraterImg/Adjust/&quot;</span><br><span class="line">foldName = &quot;East_CraterAdjust12&quot;</span><br><span class="line">data, label = load_Img(craterDir,foldName)</span><br></pre></td></tr></table></figure></p>
<h2 id="Python图形图像处理库ImageEnhance模块图像增强"><a href="#Python图形图像处理库ImageEnhance模块图像增强" class="headerlink" title="Python图形图像处理库ImageEnhance模块图像增强"></a>Python图形图像处理库ImageEnhance模块图像增强</h2><p>可以使用ImageEnhance模块，其中包含了大量的预定义的图片加强方式<br>加强器包括，色彩平衡，亮度平衡，对比度，锐化度等。通过使用这些加强器，可以很轻松的做到图片的色彩调整，亮度调整，锐化等操作，google picasa中提供的一些基本的图片加强功能都可以实现。</p>
<p>颜色加强color用于调整图片的色彩平衡，相当于彩色电视机的色彩调整。这个类实现了上边提到的接口的enhance方法。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageEnhance.Color(img)#获得色彩加强器实例  </span><br></pre></td></tr></table></figure></p>
<p>然后即可使用enhance(factor)方法进行调整。</p>
<p>亮度加强brightness用于调整图片的明暗平衡。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageEnhance.Brightness(img)#获得亮度加强器实例  </span><br></pre></td></tr></table></figure><br>factor=1返回一个黑色的图片对象，0返回原始图片对象</p>
<p>对比度加强contrast用于调整图片的对比度，相当于彩色电视机的对比度调整。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageEnhance.Contrast(image) #获得对比度加强器实例  </span><br></pre></td></tr></table></figure><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import ImageEnhance  </span><br><span class="line">enh = ImageEnhance.Contrast(im)  </span><br><span class="line">enh.ehhance(1.5).show(&quot;50% more contrast&quot;)</span><br></pre></td></tr></table></figure></p>
<p>锐化度加强sharpness用于锐化/钝化图片。<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageEnhance.Sharpness(image) #返回锐化加强器实例  </span><br></pre></td></tr></table></figure><br>应该注意的是锐化操作的factor是一个0-2的浮点数，当factor=0时，返回一个完全模糊的图片对象，当factor=1时，返回一个完全锐化的图片对象，factor=1时，返回原始图片对象</p>
<h2 id="Python图像处理库ImageChops模块"><a href="#Python图像处理库ImageChops模块" class="headerlink" title="Python图像处理库ImageChops模块"></a>Python图像处理库ImageChops模块</h2><p>这个模块主要包括对图片的算术运算，叫做通道运算(channel operations)。这个模块可以用于多种途径，包括一些特效制作，图片整合，算数绘图等等方面。</p>
<p>Invert:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageChops.invert(image) </span><br></pre></td></tr></table></figure><br>图片反色，类似于集合操作中的求补集，最大值为Max，每个像素做减法，取出反色.<br>公式<br>out = MAX - image</p>
<p>lighter:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageChops.lighter(image1, image2)  </span><br></pre></td></tr></table></figure></p>
<p>darker:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageChops.darker(image1, image2)  </span><br></pre></td></tr></table></figure></p>
<p>difference<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageChops.difference(image1, image2)</span><br></pre></td></tr></table></figure><br>求出两张图片的绝对值，逐像素的做减法</p>
<p>multiply<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageChops.multiply(image1, image2)</span><br></pre></td></tr></table></figure><br>将两张图片互相叠加，如果用纯黑色与某图片进行叠加操作，会得到一个纯黑色的图片。如果用纯白色与图片作叠加，图片不受影响。<br>计算的公式如下公式<br>out = img1 * img2 / MAX</p>
<p>screen:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageChops.screen(image1, image2)  </span><br></pre></td></tr></table></figure><br>先反色，后叠加。<br>公式<br>out = MAX - ((MAX - image1) * (MAX - image2) / MAX)</p>
<p>add:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageChops.add(img1, img2, scale, offset)  </span><br></pre></td></tr></table></figure><br>对两张图片进行算术加法，按照一下公式进行计算<br>公式<br>out = (img1+img2) / scale + offset</p>
<p>如果尺度和偏移被忽略的化，scale=1.0, offset=0.0即<br>out = img1 + img2</p>
<p>subtract:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageChops.subtract(img1, img2, scale, offset)  </span><br></pre></td></tr></table></figure><br>对两张图片进行算术减法：<br>公式<br>out = (img1-img2) / scale + offset</p>
<h2 id="Python图形图像处理库ImageFilter模块图像滤镜"><a href="#Python图形图像处理库ImageFilter模块图像滤镜" class="headerlink" title="Python图形图像处理库ImageFilter模块图像滤镜"></a>Python图形图像处理库ImageFilter模块图像滤镜</h2><p>ImageFilter是PIL的滤镜模块，通过这些预定义的滤镜，可以方便的对图片进行一些过滤操作，从而去掉图片中的噪音(部分的消除)，这样可以降低将来处理的复杂度(如模式识别等)。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>滤镜名称</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>ImageFilter.BLUR</td>
<td>模糊滤镜</td>
</tr>
<tr>
<td>ImageFilter.CONTOUR</td>
<td>轮廓</td>
</tr>
<tr>
<td>ImageFilter.EDGE_ENHANCE</td>
<td>边界加强</td>
</tr>
<tr>
<td>ImageFilter.EDGE_ENHANCE_MORE</td>
<td>边界加强(阀值更大)</td>
</tr>
<tr>
<td>ImageFilter.EMBOSS</td>
<td>浮雕滤镜</td>
</tr>
<tr>
<td>ImageFilter.FIND_EDGES</td>
<td>边界滤镜</td>
</tr>
<tr>
<td>ImageFilter.SMOOTH</td>
<td>平滑滤镜</td>
</tr>
<tr>
<td>ImageFilter.SMOOTH_MORE</td>
<td>平滑滤镜(阀值更大)</td>
</tr>
<tr>
<td>ImageFilter.SHARPEN</td>
<td>锐化滤镜</td>
</tr>
</tbody>
</table>
</div>
<p>要使用PIL的滤镜功能，需要引入ImageFilter模块<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Image, ImageFilter  </span><br><span class="line">  </span><br><span class="line">def inHalf(img):  </span><br><span class="line">    w,h = img.size  </span><br><span class="line">    return img.resize((w/2, h/2))  </span><br><span class="line">  </span><br><span class="line">def filterDemo():  </span><br><span class="line">    img = Image.open(&quot;sandstone_half.jpg&quot;)  </span><br><span class="line">    #img = inHalf(img)  </span><br><span class="line">    imgfilted = img.filter(ImageFilter.SHARPEN)  </span><br><span class="line">    #imgfilted.show()  </span><br><span class="line">    imgfilted.save(&quot;sandstone_sharpen.jpg&quot;)  </span><br><span class="line">  </span><br><span class="line">if __name__ == &quot;__main__&quot;:  </span><br><span class="line">    filterDemo()</span><br></pre></td></tr></table></figure></p>
<h1 id="Python-netcdf4包的使用"><a href="#Python-netcdf4包的使用" class="headerlink" title="Python netcdf4包的使用"></a>Python netcdf4包的使用</h1><p>netCDF4包的文档：<a href="http://unidata.github.io/netcdf4-python/netCDF4/index.html">http://unidata.github.io/netcdf4-python/netCDF4/index.html</a></p>
<p>netCDF files come in five flavors. </p>
<ul>
<li>NETCDF3_CLASSIC was the original netcdf binary format, and was limited to file sizes less than 2 Gb. </li>
<li>NETCDF3_64BIT_OFFSET was introduced in version 3.6.0 of the library, and extended the original binary format to allow for file sizes greater than 2 Gb. </li>
<li>NETCDF3_64BIT_DATA is a new format that requires version 4.4.0 of the C library - it extends the NETCDF3_64BIT_OFFSET binary format to allow for unsigned/64 bit integer data types and 64-bit dimension sizes. </li>
<li>NETCDF3_64BIT is an alias for NETCDF3_64BIT_OFFSET. </li>
<li>NETCDF4_CLASSIC files use the version 4 disk format (HDF5), but omits features not found in the version 3 API. They can be read by netCDF 3 clients only if they have been relinked against the netCDF 4 library. They can also be read by HDF5 clients. NETCDF4 files use the version 4 disk format (HDF5) and use the new features of the version 4 API. The netCDF4 module can read and write files in any of these formats. When creating a new file, the format may be specified using the format keyword in the Dataset constructor. The default format is NETCDF4. To see how a given file is formatted, you can examine the data_model attribute. </li>
</ul>
<p>Closing the netCDF file is accomplished via the Dataset.close method of the Dataset instance.</p>
<p>因为要使用netCDF4格式的文件，所以学了一下如何把一个nc文件复制成另一个。在创建新文件时，format只能设置成“NETCDF3_CLASSIC”，否则在public2机器上无法读取，应该是HDF5的问题。下边的程序就比较齐全了，无论是维度的设置、变量及其属性的设置、全局属性的设置等都有了。复制出来的两个nc文件是一样的。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> netCDF4 <span class="keyword">import</span> Dataset</span><br><span class="line"></span><br><span class="line">nc = Dataset(<span class="string">&quot;wind2018100700.nc&quot;</span>)</span><br><span class="line">newnc = Dataset(<span class="string">&quot;new_wind.nc&quot;</span>, <span class="string">&quot;w&quot;</span>, <span class="built_in">format</span>=<span class="string">&#x27;NETCDF3_CLASSIC&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ncdimensions = nc.dimensions</span><br><span class="line"><span class="keyword">for</span> dim <span class="keyword">in</span> nc.dimensions.values():</span><br><span class="line">    newncdim_sample = newnc.createDimension(dim.name, dim.size)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> nc.variables.values():</span><br><span class="line">    <span class="built_in">print</span>(var)</span><br><span class="line">    <span class="built_in">print</span>(var.datatype)</span><br><span class="line">    <span class="built_in">print</span>(var.ncattrs())</span><br><span class="line">    <span class="built_in">print</span>(var.dimensions)</span><br><span class="line">    new_var = newnc.createVariable(var.name, var.datatype, var.dimensions, shuffle=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">for</span> attr <span class="keyword">in</span> var.ncattrs():</span><br><span class="line">        new_var.setncattr(attr, var.getncattr(attr))</span><br><span class="line">    newnc[var.name][:] = nc[var.name][:]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> attr <span class="keyword">in</span> nc.ncattrs():</span><br><span class="line">    newnc.setncattr(attr,nc.getncattr(attr))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">nc.close()</span><br><span class="line">newnc.close()</span><br></pre></td></tr></table></figure>
<h1 id="Python-用matplotlib画三角形"><a href="#Python-用matplotlib画三角形" class="headerlink" title="Python 用matplotlib画三角形"></a>Python 用matplotlib画三角形</h1><p>老是得画三角形，所以用Python写了个简单的脚本备忘。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">lists = [<span class="string">&quot;(-29.548464, -48.168283)(101.860675, -115.334736)(-95.193356, 86.781746)&quot;</span>,</span><br><span class="line">        <span class="string">&quot;(-95.193356, 86.781746)(101.860675, -115.334736)(101.860675, 86.781746)&quot;</span></span><br><span class="line">]</span><br><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">r&#x27;[-+]?[0-9]*\.?[0-9]+&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> lists:</span><br><span class="line">    datas = pattern.findall(l)</span><br><span class="line">	length = <span class="built_in">len</span>(datas)</span><br><span class="line">	<span class="keyword">if</span> (length % <span class="number">2</span> != <span class="number">0</span>):</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&quot;error&quot;</span>)</span><br><span class="line">		exit(<span class="number">0</span>)</span><br><span class="line">	lons = []</span><br><span class="line">	lats = []</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(length/<span class="number">2</span>)):</span><br><span class="line">		lons.append(<span class="built_in">float</span>(datas[i*<span class="number">2</span>]))</span><br><span class="line">		lats.append(<span class="built_in">float</span>(datas[i*<span class="number">2</span>+<span class="number">1</span>]))</span><br><span class="line">	plt.scatter(lons, lats, c=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(lons)):</span><br><span class="line">		plt.text(lons[i]*<span class="number">1.01</span>, lats[i]*<span class="number">1.01</span>, <span class="built_in">str</span>(lons[i])+<span class="string">&quot;\n&quot;</span>+<span class="built_in">str</span>(lats[i]))</span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">		plt.plot([lons[j], lons[(j+<span class="number">1</span>)%<span class="number">3</span>]], [lats[j], lats[(j+<span class="number">1</span>)%<span class="number">3</span>]], color=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></p>
<h1 id="Python使用thinter写界面"><a href="#Python使用thinter写界面" class="headerlink" title="Python使用thinter写界面"></a>Python使用thinter写界面</h1><p>找了一个样例，以后以此为模板。注意前边的import，在python3下可以正常运行，python3自带了Tkinter。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _tkinter</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">LOG_LINE_NUM = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MY_GUI</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,init_window_name</span>):</span><br><span class="line">        <span class="variable language_">self</span>.init_window_name = init_window_name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#设置窗口</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_init_window</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.init_window_name.title(<span class="string">&quot;文本处理工具_v1.2&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.init_window_name.geometry(<span class="string">&#x27;1068x681+10+10&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.init_window_name[<span class="string">&quot;bg&quot;</span>] = <span class="string">&quot;white&quot;</span>                                    <span class="comment">#窗口背景色，其他背景色见：blog.csdn.net/chl0000/article/details/7657887</span></span><br><span class="line">        <span class="variable language_">self</span>.init_window_name.attributes(<span class="string">&quot;-alpha&quot;</span>,<span class="number">0.9</span>)                          <span class="comment">#虚化，值越小虚化程度越高</span></span><br><span class="line">        <span class="comment">#标签</span></span><br><span class="line">        <span class="variable language_">self</span>.init_data_label = Label(<span class="variable language_">self</span>.init_window_name, text=<span class="string">&quot;待处理数据&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.init_data_label.grid(row=<span class="number">0</span>, column=<span class="number">0</span>)</span><br><span class="line">        <span class="variable language_">self</span>.result_data_label = Label(<span class="variable language_">self</span>.init_window_name, text=<span class="string">&quot;输出结果&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.result_data_label.grid(row=<span class="number">0</span>, column=<span class="number">12</span>)</span><br><span class="line">        <span class="variable language_">self</span>.log_label = Label(<span class="variable language_">self</span>.init_window_name, text=<span class="string">&quot;日志&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.log_label.grid(row=<span class="number">12</span>, column=<span class="number">0</span>)</span><br><span class="line">        <span class="comment">#文本框</span></span><br><span class="line">        <span class="variable language_">self</span>.init_data_Text = Text(<span class="variable language_">self</span>.init_window_name, width=<span class="number">67</span>, height=<span class="number">35</span>)  <span class="comment">#原始数据录入框</span></span><br><span class="line">        <span class="variable language_">self</span>.init_data_Text.grid(row=<span class="number">1</span>, column=<span class="number">0</span>, rowspan=<span class="number">10</span>, columnspan=<span class="number">10</span>)</span><br><span class="line">        <span class="variable language_">self</span>.result_data_Text = Text(<span class="variable language_">self</span>.init_window_name, width=<span class="number">70</span>, height=<span class="number">49</span>)  <span class="comment">#处理结果展示</span></span><br><span class="line">        <span class="variable language_">self</span>.result_data_Text.grid(row=<span class="number">1</span>, column=<span class="number">12</span>, rowspan=<span class="number">15</span>, columnspan=<span class="number">10</span>)</span><br><span class="line">        <span class="variable language_">self</span>.log_data_Text = Text(<span class="variable language_">self</span>.init_window_name, width=<span class="number">66</span>, height=<span class="number">9</span>)  <span class="comment"># 日志框</span></span><br><span class="line">        <span class="variable language_">self</span>.log_data_Text.grid(row=<span class="number">13</span>, column=<span class="number">0</span>, columnspan=<span class="number">10</span>)</span><br><span class="line">        <span class="comment">#按钮</span></span><br><span class="line">        <span class="variable language_">self</span>.str_trans_to_md5_button = Button(<span class="variable language_">self</span>.init_window_name, text=<span class="string">&quot;字符串转MD5&quot;</span>, bg=<span class="string">&quot;lightblue&quot;</span>, width=<span class="number">10</span>,command=<span class="variable language_">self</span>.str_trans_to_md5)</span><br><span class="line">        <span class="variable language_">self</span>.str_trans_to_md5_button.grid(row=<span class="number">1</span>, column=<span class="number">11</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#功能函数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">str_trans_to_md5</span>(<span class="params">self</span>):</span><br><span class="line">        src = <span class="variable language_">self</span>.init_data_Text.get(<span class="number">1.0</span>,END).strip().replace(<span class="string">&quot;\n&quot;</span>,<span class="string">&quot;&quot;</span>).encode()</span><br><span class="line">        <span class="comment">#print(&quot;src =&quot;,src)</span></span><br><span class="line">        <span class="keyword">if</span> src:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                myMd5 = hashlib.md5()</span><br><span class="line">                myMd5.update(src)</span><br><span class="line">                myMd5_Digest = myMd5.hexdigest()</span><br><span class="line">                <span class="comment">#print(myMd5_Digest)</span></span><br><span class="line">                <span class="comment">#输出到界面</span></span><br><span class="line">                <span class="variable language_">self</span>.result_data_Text.delete(<span class="number">1.0</span>,END)</span><br><span class="line">                <span class="variable language_">self</span>.result_data_Text.insert(<span class="number">1.0</span>,myMd5_Digest)</span><br><span class="line">                <span class="variable language_">self</span>.write_log_to_Text(<span class="string">&quot;INFO:str_trans_to_md5 success&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="variable language_">self</span>.result_data_Text.delete(<span class="number">1.0</span>,END)</span><br><span class="line">                <span class="variable language_">self</span>.result_data_Text.insert(<span class="number">1.0</span>,<span class="string">&quot;字符串转MD5失败&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.write_log_to_Text(<span class="string">&quot;ERROR:str_trans_to_md5 failed&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#获取当前时间</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_current_time</span>(<span class="params">self</span>):</span><br><span class="line">        current_time = time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>,time.localtime(time.time()))</span><br><span class="line">        <span class="keyword">return</span> current_time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#日志动态打印</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">write_log_to_Text</span>(<span class="params">self,logmsg</span>):</span><br><span class="line">        <span class="keyword">global</span> LOG_LINE_NUM</span><br><span class="line">        current_time = <span class="variable language_">self</span>.get_current_time()</span><br><span class="line">        logmsg_in = <span class="built_in">str</span>(current_time) +<span class="string">&quot; &quot;</span> + <span class="built_in">str</span>(logmsg) + <span class="string">&quot;\n&quot;</span>      <span class="comment">#换行</span></span><br><span class="line">        <span class="keyword">if</span> LOG_LINE_NUM &lt;= <span class="number">7</span>:</span><br><span class="line">            <span class="variable language_">self</span>.log_data_Text.insert(END, logmsg_in)</span><br><span class="line">            LOG_LINE_NUM = LOG_LINE_NUM + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.log_data_Text.delete(<span class="number">1.0</span>,<span class="number">2.0</span>)</span><br><span class="line">            <span class="variable language_">self</span>.log_data_Text.insert(END, logmsg_in)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gui_start</span>():</span><br><span class="line">    init_window = Tk()              <span class="comment">#实例化出一个父窗口</span></span><br><span class="line">    ZMJ_PORTAL = MY_GUI(init_window)</span><br><span class="line">    <span class="comment"># 设置根窗口默认属性</span></span><br><span class="line">    ZMJ_PORTAL.set_init_window()</span><br><span class="line"></span><br><span class="line">    init_window.mainloop()          <span class="comment">#父窗口进入事件循环，可以理解为保持窗口运行，否则界面不展示</span></span><br><span class="line"></span><br><span class="line">gui_start()</span><br></pre></td></tr></table></figure></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%A7%AF%E7%B4%AF/" rel="tag"># 积累</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/08/12/%E8%B0%88%E8%B0%88%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84ACID/" rel="prev" title="谈谈数据库的ACID">
      <i class="fa fa-chevron-left"></i> 谈谈数据库的ACID
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/08/28/cpp%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%8A%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7/" rel="next" title="C++关键字及语言特性">
      C++关键字及语言特性 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Python%E7%9A%84PIL%E5%BA%93"><span class="nav-number">1.</span> <span class="nav-text">Python的PIL库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8%E5%9B%BE%E7%89%87%E4%B8%8A%E9%9D%A2%E5%8A%A0%E6%96%87%E5%AD%97"><span class="nav-number">1.1.</span> <span class="nav-text">在图片上面加文字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BE%E7%89%87%E4%BF%A1%E6%81%AF"><span class="nav-number">1.2.</span> <span class="nav-text">图片信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pil%E8%83%BD%E5%A4%84%E7%90%86%E7%9A%84%E5%9B%BE%E7%89%87%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.2.1.</span> <span class="nav-text">pil能处理的图片类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E9%81%93"><span class="nav-number">1.2.2.</span> <span class="nav-text">通道</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9D%90%E6%A0%87"><span class="nav-number">1.2.3.</span> <span class="nav-text">坐标</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%BE%E7%89%87%E7%9A%84%E6%89%93%E5%BC%80%E4%B8%8E%E6%98%BE%E7%A4%BA"><span class="nav-number">2.</span> <span class="nav-text">图片的打开与显示</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#matplotlib%E6%A0%87%E5%87%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">2.1.</span> <span class="nav-text">matplotlib标准模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BE%E7%89%87%E7%9A%84%E4%BF%9D%E5%AD%98"><span class="nav-number">2.2.</span> <span class="nav-text">图片的保存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E9%80%9A%E9%81%93-%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2-%E8%A3%81%E5%89%AA"><span class="nav-number">2.3.</span> <span class="nav-text">图像通道\几何变换\裁剪</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BD%A9%E8%89%B2%E5%9B%BE%E5%83%8F%E8%BD%AC%E7%81%B0%E5%BA%A6%E5%9B%BE"><span class="nav-number">2.3.1.</span> <span class="nav-text">彩色图像转灰度图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E9%81%93%E5%88%86%E7%A6%BB%E4%B8%8E%E5%90%88%E5%B9%B6"><span class="nav-number">2.4.</span> <span class="nav-text">通道分离与合并</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B0%B4%E5%B9%B3%E6%8B%BC%E6%8E%A5%E5%9B%BE%E7%89%87"><span class="nav-number">2.4.1.</span> <span class="nav-text">水平拼接图片</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AB%96%E7%9B%B4%E6%8B%BC%E6%8E%A5%E5%9B%BE%E7%89%87"><span class="nav-number">2.5.</span> <span class="nav-text">竖直拼接图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A3%81%E5%89%AA%E5%9B%BE%E7%89%87"><span class="nav-number">2.6.</span> <span class="nav-text">裁剪图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%A0%E4%BD%95%E5%8F%98%E6%8D%A2"><span class="nav-number">2.7.</span> <span class="nav-text">几何变换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E6%8D%A2%E5%9B%BE%E5%83%8F"><span class="nav-number">2.8.</span> <span class="nav-text">转换图像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#python%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%BA%93Image%E6%A8%A1%E5%9D%97"><span class="nav-number">2.9.</span> <span class="nav-text">python图像处理库Image模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%9B%BE%E7%89%87"><span class="nav-number">2.9.1.</span> <span class="nav-text">创建一个新的图片</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%82%E5%8F%A0%E5%9B%BE%E7%89%87"><span class="nav-number">2.10.</span> <span class="nav-text">层叠图片</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E6%B0%B4%E5%8D%B0"><span class="nav-number">2.11.</span> <span class="nav-text">添加水印</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E5%AD%97%E6%B0%B4%E5%8D%B0"><span class="nav-number">2.11.1.</span> <span class="nav-text">添加文字水印</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%B0%8F%E5%9B%BE%E7%89%87%E6%B0%B4%E5%8D%B0"><span class="nav-number">2.11.2.</span> <span class="nav-text">添加小图片水印</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PIL-Image-%E5%9B%BE%E5%83%8F%E4%BA%92%E8%BD%AC-numpy-%E6%95%B0%E7%BB%84"><span class="nav-number">2.11.3.</span> <span class="nav-text">PIL Image 图像互转 numpy 数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-image-%E6%9F%A5%E7%9C%8B%E5%9B%BE%E7%89%87%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%8F%AF%E7%94%A8%E5%A6%82%E4%B8%8B%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">2.11.4.</span> <span class="nav-text">numpy image 查看图片信息，可用如下的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86-numpy-%E6%95%B0%E7%BB%84%E8%BD%AC%E6%8D%A2%E4%B8%BA-PIL-%E5%9B%BE%E7%89%87"><span class="nav-number">2.11.5.</span> <span class="nav-text">将 numpy 数组转换为 PIL 图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PIL-image-%E6%9F%A5%E7%9C%8B%E5%9B%BE%E7%89%87%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%8F%AF%E7%94%A8%E5%A6%82%E4%B8%8B%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">2.11.6.</span> <span class="nav-text">PIL image 查看图片信息，可用如下的方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E4%B8%AD%E7%9A%84%E5%83%8F%E7%B4%A0%E8%AE%BF%E9%97%AE"><span class="nav-number">3.</span> <span class="nav-text">图像中的像素访问</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9C%E5%83%8F%E7%B4%A0%E7%82%B9"><span class="nav-number">3.1.</span> <span class="nav-text">直接操作像素点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-number">3.2.</span> <span class="nav-text">图像直方图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%BB%E7%81%B0%E5%BA%A6%E5%9B%BE%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-number">3.2.1.</span> <span class="nav-text">画灰度图直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BD%A9%E8%89%B2%E5%9B%BE%E7%89%87%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-number">3.2.2.</span> <span class="nav-text">彩色图片直方图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E5%9B%BE%E5%83%8F"><span class="nav-number">3.3.</span> <span class="nav-text">Python如何读取指定文件夹下的所有图像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python%E5%9B%BE%E5%BD%A2%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%BA%93ImageEnhance%E6%A8%A1%E5%9D%97%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA"><span class="nav-number">3.4.</span> <span class="nav-text">Python图形图像处理库ImageEnhance模块图像增强</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%BA%93ImageChops%E6%A8%A1%E5%9D%97"><span class="nav-number">3.5.</span> <span class="nav-text">Python图像处理库ImageChops模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python%E5%9B%BE%E5%BD%A2%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%BA%93ImageFilter%E6%A8%A1%E5%9D%97%E5%9B%BE%E5%83%8F%E6%BB%A4%E9%95%9C"><span class="nav-number">3.6.</span> <span class="nav-text">Python图形图像处理库ImageFilter模块图像滤镜</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-netcdf4%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">4.</span> <span class="nav-text">Python netcdf4包的使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python-%E7%94%A8matplotlib%E7%94%BB%E4%B8%89%E8%A7%92%E5%BD%A2"><span class="nav-number">5.</span> <span class="nav-text">Python 用matplotlib画三角形</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python%E4%BD%BF%E7%94%A8thinter%E5%86%99%E7%95%8C%E9%9D%A2"><span class="nav-number">6.</span> <span class="nav-text">Python使用thinter写界面</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Hao Yu</p>
  <div class="site-description" itemprop="description">Introduce something interesting and recode learning process, some articles are written by others, the original link has been given as much as possible, thanks to the original author</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">128</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hao Yu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
